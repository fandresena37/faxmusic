class ProductCardYotpo extends window.BAO.CustomElement(){connectedCallback(){if(super.connectedCallback(),!this.productId){console.error("The attribute data-product-id is required."),this.hide();return}if(!this.count){console.error('The element data-product-card-yotpo-el="count" is required.'),this.hide();return}if(!this.stars){console.error('The element data-product-card-yotpo-el="stars" is required.'),this.hide();return}this.initialize()}initialize(){this.consumeYotpoApi()}async consumeYotpoApi(){try{const response=await fetch(this.url);response.status!==200&&(console.error("Error:",response.status),this.hide());const data=await response.json();data.response.bottomline.total_review===0&&this.hide(),this.updateStars(data.response.bottomline.average_score),this.renderCount(data.response.bottomline.total_review)}catch(error){console.error("Error:",error)}}updateStars(averageScore){const roundedScore=Math.round(averageScore*2)/2,wholeStars=Math.floor(roundedScore),halfStar=roundedScore%1!==0;for(let i=0;i<wholeStars;i++)this.stars[i].querySelector("path").style.fill="#0B0B0B";halfStar&&(this.stars[wholeStars].innerHTML=this.halfStarSvg)}renderCount(count){this.count.innerText=`(${count})`}hide(){this.style.display="none"}get productId(){return this.dataset.productId}get count(){return this.querySelector('[data-product-card-yotpo-el="count"]')}get stars(){return this.querySelectorAll('[data-product-card-yotpo-el="star"]')}get url(){return`https://api-cdn.yotpo.com/v1/widget/${window.theme.yotpo.apiKey}/products/${this.productId}/bottomline.json`}get halfStarSvg(){return`
      <defs>
        <linearGradient id="half-fill" x1="0" y1="0" x2="1" y2="0">
          <stop offset="51%" stop-color="#0B0B0B" />
          <stop offset="50%" stop-color="currentColor" />
        </linearGradient>
      </defs>
      <path fill="url(#half-fill)" d="m7.5 0 1.684 5.182h5.449l-4.408 3.203 1.683 5.183L7.5 10.365l-4.408 3.203 1.683-5.183L.367 5.182h5.45L7.5 0Z"/>
    `}}customElements.get("product-card-yotpo")||customElements.define("product-card-yotpo",ProductCardYotpo);
//# sourceMappingURL=/cdn/shop/t/50/assets/product-card-yotpo.js.map?v=24177211706790110061716203054
