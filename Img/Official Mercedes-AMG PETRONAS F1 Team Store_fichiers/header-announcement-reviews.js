class HeaderAnnouncementReviews extends window.BAO.CustomElement(){connectedCallback(){if(super.connectedCallback(),!this.count){console.error('The element data-header-announcement-reviews-el="count" is required.');return}if(!this.stars){console.error('The element data-header-announcement-reviews-el="stars" is required.');return}this.consumeYotpoApi()}async consumeYotpoApi(){try{const response=await fetch(this.url);response.status!==200&&console.error("Error:",response.status);const{response:{bottomline:{average_score:averageScore=0,total_review:totalReviews=0}={}}={}}=await response.json();averageScore&&totalReviews&&(this.renderStars(averageScore),this.renderCount(averageScore,totalReviews),this.show())}catch(error){console.error("Error:",error)}}renderStars(averageScore){const wholeStars=Math.floor(averageScore),halfStar=averageScore%1!==0;let complete=!1;this.stars.forEach((star,index)=>{index+1>wholeStars&&(halfStar&&!complete?(star.setAttribute("fill","url(#hd-half-fill)"),complete=!0):star.setAttribute("fill-opacity","25%"))})}renderCount(averageScore,count){const score=Math.round(averageScore*10)/10;this.count.innerText=`(${score}) based on ${count} reviews`}show(){this.setAttribute("aria-hidden","false")}get count(){return this.querySelector('[data-header-announcement-reviews-el="count"]')}get stars(){return this.querySelectorAll('[data-header-announcement-reviews-el="stars"] path')}get url(){return`https://api-cdn.yotpo.com/v1/widget/${window.theme.yotpo.apiKey}/reviews.json`}}customElements.get("header-announcement-reviews")||customElements.define("header-announcement-reviews",HeaderAnnouncementReviews);
//# sourceMappingURL=/cdn/shop/t/50/assets/header-announcement-reviews.js.map?v=95064646490751684261715778981
